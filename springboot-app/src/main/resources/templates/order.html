<!DOCTYPE html>
<html lang="ja" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org/" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>購入情報|Tanashin</title>
    <script src="https://kit.fontawesome.com/3c982ecd98.js" crossorigin="anonymous"></script>
    <link href="/css/bootstrap/bootstrap.min.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="/image/favicon.ico">
</head>
<body>
    <div th:replace="common/header :: headerFlagment"></div>
    <!-- ↑↑これより上は各ページ共通なので変更しない↑↑ -->
    <main>
        <!-- <main>タグ内を各ページに合わせて変更 -->
        <div th:if="${cart}" class="container mt-5 work-width">
            <div class="row order-col justify-content-center">
                <div class="col col-md-6 pt-4 mb-3 rounded px-3" style="background-color: #F4F3EF;">
                    <form id="orderForm" th:object="${customer}" th:action="@{/orders}" method="post">
                        <dl>
                            <dt>
                                <label for="email" class="fw-normal">メールアドレス
                                <span class="text-white bg-warning border rounded ms-2 p-1">必須</span></label>
                            </dt>
                            <dd class="d-flex pt-2">
                                <input class="py-1 col-12" id="email" type="text" th:field="*{email}" />
                            </dd>
                            <div class="d-flex justify-content-between">
                                <span class="text-danger font-small mb-2 ms-1 height-small" id="emailMessage"></span>
                                <span class="text-secondary font-small">(例) sumple@example.com</span>
                            </div>

                            <dt><label class="fs-5 mt-3 mb-2">お届け先情報</label></dt>

                            <dt>
                                <label for="name" class="fw-normal">お名前
                                <span class="text-white bg-warning border rounded ms-2 p-1">必須</span></label>
                            </dt>
                            <dd class="pt-2 d-flex justify-content-between">
                                <input class="py-1 form-area" type="text" id="lastName" th:field="*{lastName}" placeholder="性" />
                                <input class="py-1 form-area" type="text" id="firstName" th:field="*{firstName}" placeholder="名" />
                            </dd>
                            <div class="d-flex justify-content-between">
                                <div class="form-area d-flex justify-content-between">
                                    <span class="text-danger font-small mb-2 ms-1 height-small" id="lastNameMessage"></span>
                                    <span class="d-flex justify-content-end text-secondary font-small">(例) 田中</span>
                                </div>
                                <div class="form-area d-flex justify-content-between">
                                    <span class="text-danger font-small mb-2 ms-1 height-small" id="firstNameMessage"></span>
                                    <span class="d-flex justify-content-end text-secondary font-small">(例) 太郎</span>
                                </div>
                            </div>

                            <dt class="mt-2">
                                <label for="postalCode" class="fw-normal">郵便番号
                                <span class="text-white bg-warning border rounded ms-2 p-1">必須</span></label>
                            </dt>
                            <dd class="d-flex pt-2">
                                <input class="py-1 form-area" type="text" th:field="*{postalCode}" id="postalCode" />
                                <button type="button" class="ms-3 rounded" id="searchAddress">住所検索</button>
                            </dd>
                            <div class="d-flex justify-content-between">
                                <span class="text-danger font-small mb-2 ms-1 height-small" id="postalCodeMessage"></span>
                                <span class="form-area d-flex justify-content-end text-secondary font-small">(例) 1000014</span>
                            </div>

                            <dt class="mt-2">
                                <label for="address" class="fw-normal">住所
                                <span class="text-white bg-warning border rounded ms-2 p-1">必須</span></label>
                            </dt>
                            <dd class="d-flex pt-2">
                                <select class="py-2 form-area" th:field="*{prefecture}" id="prefecture" value="" placeholder="都道府県">
                                    <option value="" selected>選択してください</option>
                                    <option value="北海道">北海道</option>
                                    <option value="青森県">青森県</option>
                                    <option value="岩手県">岩手県</option>
                                    <option value="宮城県">宮城県</option>
                                    <option value="秋田県">秋田県</option>
                                    <option value="山形県">山形県</option>
                                    <option value="福島県">福島県</option>
                                    <option value="茨城県">茨城県</option>
                                    <option value="栃木県">栃木県</option>
                                    <option value="群馬県">群馬県</option>
                                    <option value="埼玉県">埼玉県</option>
                                    <option value="千葉県">千葉県</option>
                                    <option value="東京都">東京都</option>
                                    <option value="神奈川県">神奈川県</option>
                                    <option value="新潟県">新潟県</option>
                                    <option value="富山県">富山県</option>
                                    <option value="石川県">石川県</option>
                                    <option value="福井県">福井県</option>
                                    <option value="山梨県">山梨県</option>
                                    <option value="長野県">長野県</option>
                                    <option value="岐阜県">岐阜県</option>
                                    <option value="静岡県">静岡県</option>
                                    <option value="愛知県">愛知県</option>
                                    <option value="三重県">三重県</option>
                                    <option value="滋賀県">滋賀県</option>
                                    <option value="京都府">京都府</option>
                                    <option value="大阪府">大阪府</option>
                                    <option value="兵庫県">兵庫県</option>
                                    <option value="奈良県">奈良県</option>
                                    <option value="和歌山県">和歌山県</option>
                                    <option value="鳥取県">鳥取県</option>
                                    <option value="島根県">島根県</option>
                                    <option value="岡山県">岡山県</option>
                                    <option value="広島県">広島県</option>
                                    <option value="山口県">山口県</option>
                                    <option value="徳島県">徳島県</option>
                                    <option value="香川県">香川県</option>
                                    <option value="愛媛県">愛媛県</option>
                                    <option value="高知県">高知県</option>
                                    <option value="福岡県">福岡県</option>
                                    <option value="佐賀県">佐賀県</option>
                                    <option value="長崎県">長崎県</option>
                                    <option value="熊本県">熊本県</option>
                                    <option value="大分県">大分県</option>
                                    <option value="宮崎県">宮崎県</option>
                                    <option value="鹿児島県">鹿児島県</option>
                                    <option value="沖縄県">沖縄県</option>
                                </select>
                            </dd>
                            <div class="d-flex justify-content-between">
                                <span class="text-danger font-small mb-2 ms-1 height-small" id="prefectureMessage"></span>
                                <span class="form-area d-flex justify-content-end text-secondary font-small">(例) 東京都</span>
                            </div>
                            <dd class="mt-2">
                                <input class="py-1 col-12 mb-2" type="text" th:field="*{city}" id="city" placeholder="市区町村" />
                                <div class="d-flex justify-content-between">
                                    <span class="text-danger font-small mb-2 ms-1 height-small" id="cityMessage"></span>
                                    <span class="d-flex justify-content-end text-secondary font-small">(例) 千代田区</span>
                                </div>
                                <input class="py-1 col-12 my-2" type="text" th:field="*{address}" id="address" placeholder="丁目・番地・号" />
                                <div class="d-flex justify-content-between">
                                    <span class="text-danger font-small mb-2 ms-1 height-small" id="addressMessage"></span>
                                    <span class="d-flex justify-content-end text-secondary font-small">(例) 永田町○-○-○○</span>
                                </div>
                                <input class="py-1 col-12 my-2" type="text" th:field="*{building}" id="building" placeholder="建物名" />
                                <div class="d-flex justify-content-between">
                                    <span class="text-danger font-small mb-2 ms-1 height-small" id="buildingMessage"></span>
                                    <span class="d-flex justify-content-end text-secondary font-small">(例) △△△ハウス◻︎号室</span>
                                </div>
                            </dd>
                        </dl>
                        <button class="col-12 text-white bg-black fw-bold rounded py-3 px-1 my-3" type="submit" id="orderButton">入力内容の確認へ</button>
                    </form>
                </div>
                <div class="col col-md-5 pt-4 mb-3 px-3 cart-margin rounded" style="background-color: #F4F3EF;">
                    <h6 class="fw-bold">カートに入っている商品</h6>
                    <hr />
                    <div th:each="work : ${cartList}">
                        <div class="row">
                            <div class="col-5 pb-2">
                                <img style="width: 100%; max-width: 200px;" class="object-fit-cover" th:src="'/works/'+${work.id}+'/'+${work.images[0].name}" alt="イメージ画像" />
                            </div>
                            <div class="col-7 d-flex justify-content-between">
                                <div>
                                    <h6 th:text="${work.name}"></h6>
                                    ¥<span th:text="${work.price}"></span>
                                </div>
                                <button class="border-0 d-flex align-items-start" type="button" th:onclick="'deleteCart('+ __${work.id}__ +')'" style="background-color:#F4F3EF;">
                                    <i class="fa-sharp-duotone fa-solid fa-xmark fs-4 text-secondary"></i>
                                </button>
                                <div th:class="'popup-wrapper popup-wrapper' + __${work.id}__">
                                    <div class="rounded popup-inside">
                                        <div id="message">
                                            <div class="pb-2">
                                                <h6>商品を削除しますか?</h5>
                                            </div>
                                            <div class="mt-4 d-flex">
                                                <a class="mx-1 rounded py-3 px-4 cancel-button" href="#" onclick="popupClose()">キャンセル</a>
                                                <form th:action="@{/orders/delete/{workId}(workId=${work.id})}" method="post">
                                                    <button type="submit" class="mx-1 rounded py-3 px-4 border-0 delete-button">削除する
                                                    </button>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr class="mt-1" />
                    </div>
                    <div class="row">
                        <div class="d-flex justify-content-between">
                            <h6>合計</h6>
                            <div class="pt-0">
                                ¥<span th:text="${totalPrice}"></span>
                            </div>
                        </div>
                        <hr class="mt-1" />
                        <h6 class="text-danger font-small d-flex justify-content-end">送料は別途かかります</h6>
                    </div>
                </div>
            </div>
        </div>
        <div th:unless="${cart}" class="container mt-5 cart-0-order">
            <div class="d-flex justify-content-center">
                <i class="mt-3 fa-sharp fa-solid fa-cart-shopping text-black-50" style="font-size: 100px;"></i>
            </div>
            <h6 class="d-flex justify-content-center mt-4">カートに商品は入っていません</h6>
            <a type="button" th:href="@{/}" class="d-flex justify-content-center mt-4 border rounded text-decoration-none text-white fw-bold bg-black py-3 px-4">ショップに戻る</a>
        </div>
    </main>
    <!-- ↓↓これより下は各ページ共通なので変更しない↓↓ -->
    <div th:replace="common/footer :: footerFlagment"></div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="/js/bootstrap/bootstrap.min.js"></script>
    <script src="/js/function.js"></script>
</body>
</html>