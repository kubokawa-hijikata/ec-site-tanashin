<!DOCTYPE html>
<html lang="ja" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org/" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Tanashin</title>
    <script src="https://kit.fontawesome.com/3c982ecd98.js" crossorigin="anonymous"></script>
    <link href="/css/bootstrap/bootstrap.min.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="/image/favicon.ico">
</head>
<body>
    <div th:replace="common/header :: headerFlagment"></div>
    <!-- ↑↑これより上は各ページ共通なので変更しない↑↑ -->
    <main>
        <!-- <main>タグ内を各ページに合わせて変更 -->
        <div class="container work-page-width">
            <div class="row row-cols-1 row-cols-md-2 mt-4 mx-4 pb-4" style="background-color: rgb(254, 247, 236);">
                <div class="col pt-4">
                    <div th:if="${work.order}" class="d-flex justify-content-center position-relative">
                        <img class="object-fit-contain work-image ordered-image" th:src="'/works/'+${work.id}+'/'+${work.images[0].name}" alt="イメージ画像">
                        <h5 class="ordered">SOLD OUT</h5>
                    </div>
                    <div th:unless="${work.order}" class="d-flex justify-content-center">
                        <img class="object-fit-contain work-image" th:src="'/works/'+${work.id}+'/'+${work.images[0].name}" alt="イメージ画像">
                    </div>
                </div>
                <div class="col pt-4 pe-5">
                    <h6 class="fw-bold" th:text="${work.name}"></h6>
                    ¥<span class="fw-bold fs-4" th:text="${work.price}"></span>
                    <div class="mt-3">
                        <p>
                            日光による影響で色褪せてしまう場合がありますので、できるだけ日の当たらない場所でお飾りください。
                            表面をこすらないようにお気をつけください。
                        </p>
                        <p>
                            ※写真と実物のお色味が若干異なる場合があります。
                        </p>
                        <p>
                            ▫️配送について
                            クリックポストで、平日に郵便局窓口から発送いたします。
                            発送した際に合わせて、追跡番号もご連絡いたします。
                        </p>
                    </div>
                    <div th:if="${work.order}">
                        <button disabled>カートに入れる</button>
                        <span class="text-danger text-decoration-none">※既に売り切れの商品です</span>
                    </div>
                    <div th:unless="${work.order}" class="d-flex">

                        <!-- <form th:action="@{/orders}" method="post">
                            <input th:name="id" value="true" hidden />
                            <input th:name="workId" th:value="${work.id}" hidden />
                            <input th:name="cart" value="false" hidden />
                            <button type="submit">今すぐ購入</button>
                        </form> -->

                        <div th:if="${cartFlag}" class="ms-2">
                            <button disabled>カートに入れる</button>
                            <span class="text-danger text-decoration-none">※既にカートに入っている商品です</span>
                        </div>
                        <a th:unless="${cartFlag}" th:href="@{/orders/add/{workId}(workId=${work.id})}" class="ms-2">
                            <button>カートに入れる</button>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <!-- ↓↓これより下は各ページ共通なので変更しない↓↓ -->
    <div th:replace="common/footer :: footerFlagment"></div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="/js/bootstrap/bootstrap.min.js"></script>
    <script src="/js/function.js"></script>
</body>
</html>